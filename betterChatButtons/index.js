(function(d){"use strict";function B(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var z={};(function(){(function(s,f,u,v,L,g){function P(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function A(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function E(r,e,t){return e&&A(r.prototype,e),r}function p(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var C=function(){function r(e){if(P(this,r),p(this,"_storage",void 0),p(this,"_migrations",void 0),p(this,"version",void 0),this._storage=e.storage,this.version=e.version,this._migrations=e.migrations,!this._storage.version){var t=e.initialize();for(var n in t)this._storage[n]=t[n]}if(this.version<this._storage.version)throw new Error("The supported version is lower than the current storage version");this.version>this._storage.version&&this.migrate()}return E(r,[{key:"migrate",value:function(){for(var e=this._storage,t=e.version;t<this.version;t++){var n=this._migrations[t];e=n(e),e.version=t+1}for(var a in e)this._storage[a]=e[a]}},{key:"set",value:function(e,t){for(var n=this._storage,a=e.split("."),o=0;o<a.length;o++){var c=a[o];if(o===a.length-1)n[c]=t;else if(c in n)n=n[c];else{var R={};n[c]=R,n=R}}return this}},{key:"get",value:function(e){var t;for(var n of e.split(".")){var a=t??this._storage;if(n in a)t=a[n];else return}return t}},{key:"getFirstDefined",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a of t){var o=this.get(a);if(o!==void 0)return o}}},{key:"setIfNotDefined",value:function(e,t){return this.get(e)===void 0&&this.set(e,t()),this}},{key:"unset",value:function(e){for(var t,n=e.split("."),a=0;a<n.length;a++){var o=n[a];if(a===n.length-1)return delete t[o],!0;var c=t??this._storage;if(o in c)t=c[o];else return!1}}}]),r}(),l=function(r){return g.proxyLazy(function(){return u.findByPropsLazy(r)[r]})};l("inspect");var y,h=u.findByPropsLazy("SemanticColor");h?.default?.colors??v.constants?.ThemeColorMap,h?.default?.unsafe_rawColors??v.constants?.Colors,(y=h.default).meta??(y.meta=h.default.internal),u.findByStoreNameLazy("ThemeStore"),l("TextStyleSheet"),g.proxyLazy(function(){return u.findByPropsLazy("useSafeAreaInsets").SafeAreaView});var{Button:V,IconButton:N,TableRow:m,TableRowTrailingText:O,TableRowGroup:b,TableSwitchRow:w,TableSwitch:$,TableRadioRow:j,TableRadioGroup:x,TableCheckbox:G,TextInput:H}=u.findByPropsLazy("Button","IconButton","TableRow");u.findByProps("ActionSheet"),u.findByProps("ActionSheetRow"),l("BottomSheetTitleHeader"),g.lazyDestructure(function(){return u.findByPropsLazy("FormSwitch","FormRadio","FormCheckbox")});var k=l("Stack");l("FlashList");var i=new C({storage:L.storage,initialize(){return{version:3,hide:{app:!0,gift:!0,thread:!0,voice:!0},show:{thread:!1},neverDismiss:!0}},version:3,migrations:{1:function(r){let{version:e,...t}=r;return{hide:t,neverDismiss:!0}},2:function(r){return{...r,show:{thread:!1}}}}}),T=[],{factories:{createFilterDefinition:D},lazy:{createLazyModule:M}}=u,S=D(function(r,e){let[t]=r;return e?.type?.displayName===t},function(r){let[e]=r;return`palmdevs.byTypeDisplayName(${e})`}),_=function(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return M(e?S(r):S.byRaw(r))},F={onLoad:function(){var r=_("ChatInputSendButton"),e=_("ChatInputActions");T.push(f.patcher.before("render",r.type,function(t){let[n]=t;n.canSendVoiceMessage&&(n.canSendVoiceMessage=!i.get("hide.voice"))}),f.patcher.before("render",e.type,function(t){let[n]=t;n.isAppLauncherEnabled&&(n.isAppLauncherEnabled=!i.get("hide.app")),n.canStartThreads=i.get("show.thread")||!i.get("hide.thread"),n.forceShowActions=i.get("neverDismiss"),n.shouldShowGiftButton=!i.get("hide.gift")}))},onUnload:function(){for(var r of T)r()},settings:function(){var[r,e]=React.useReducer(function(t){return~t},0);return React.createElement(v.ReactNative.ScrollView,{style:{flex:1}},React.createElement(k,{style:{paddingVertical:24,paddingHorizontal:12},spacing:24},React.createElement(b,{title:"Hide Buttons"},[["App Launcher button","AppsIcon","app"],["Gift button","ic_gift","gift"],["New Thread button","ThreadPlusIcon","thread"],["Voice Message button","MicrophoneIcon","voice"]].map(function(t){let[n,a,o]=t;return React.createElement(w,{key:o,icon:React.createElement(m.Icon,{source:f.assets.findAssetId(a)}),label:`Hide ${n}`,disabled:o==="thread"&&i.get(`show.${o}`),value:o==="thread"&&i.get(`show.${o}`)?!1:i.get(`hide.${o}`),onValueChange:function(c){i.set(`hide.${o}`,c),e()}})})),React.createElement(b,{title:"Force Show Buttons"},React.createElement(w,{icon:React.createElement(m.Icon,{source:f.assets.findAssetId("ThreadPlusIcon")}),label:"Force show New Thread button",subLabel:"Show the thread button even when you can't start threads, or when the chat input is not focused",value:i.get("show.thread"),onValueChange:function(t){i.set("show.thread",t),e()}}))))}};return s.default=F,s.storage=i,Object.defineProperty(s,"__esModule",{value:!0}),s})({},bunny.api,bunny.metro,bunny.metro.common,vendetta.plugin,bunny.utils.lazy)})();var I=B(z);return d.default=I,Object.defineProperty(d,"__esModule",{value:!0}),d})({});
