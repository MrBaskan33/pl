(function(a,y,e,i,U){"use strict";const o=e.findByProps("useStateFromStores"),P=e.findByProps("Actions","ExpressionButton")?.default||e.findByProps("ChatInput"),T=e.findByProps("getStatusSize")?.default,{Pressable:p}=e.findByProps("Pressable")||i.React;let B=e.findByProps("DEFAULT_STATUS_CUTOUT")?.DEFAULT_STATUS_CUTOUT||"cutout";const c=e.findByStoreName("SelfPresenceStore"),S=e.findByStoreName("UserStore"),d=e.findByStoreName("SelectedChannelStore"),f=e.findByStoreName("ChannelStore"),l=e.findByName("showUserProfileActionSheet",!1),u=e.findByProps("openLazy","hideActionSheet"),C=e.findByName("StatusPickerActionSheet",!1),g=e.findByProps("saveAccountChanges"),{UserSettingsSections:A}=e.findByProps("UserSettingsSections")||{UserSettingsSections:{CUSTOM_STATUS:"CUSTOM_STATUS"}};function _(){const t=o.useStateFromStores([S],function(){return S.getCurrentUser()}),s=o.useStateFromStores([c],function(){return c.getStatus()}),n=o.useStateFromStores([d],function(){return d.getCurrentlySelectedChannelId()}),r=o.useStateFromStores([f],function(){return f.getChannel(n)},[n]);return t?i.React.createElement(p,{style:{height:40,width:40,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center"},onLongPress:E,onPress:v(t?.id,r?.id??n)},i.React.createElement(T,{user:t,guildId:r?.guild_id,status:s,avatarDecoration:t.avatarDecoration,animate:!0,autoStatusCutout:B})):null}function v(t,s){return function(){l&&l({userId:t,channelId:s})}}function E(){u?.hideActionSheet(),u?.openLazy(async function(){return C},"StatusPicker",{onSetCustomStatus:function(){u?.hideActionSheet(),g?.open(A.CUSTOM_STATUS,null,{openWithoutBackstack:!0})}})}const h=[];var F={onLoad(){const t=y.after("render",P,function(s,n){const r=U.findInReactTree(n,function(I){return I?.children?.[0]?.props?.actions})?.children;r&&r.unshift(i.React.createElement(_,null))});h.push(t)},onUnload(){h.forEach(function(t){return t?.()})}};return a.default=F,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.patcher,vendetta.metro,vendetta.metro.common,vendetta.utils);
