(function(h,T,e,R,t,p,B,n,f,o){"use strict";const{FormRow:g,FormSection:y,FormDivider:k}=R.Forms,{View:D,Text:E,ScrollView:v,TouchableOpacity:A,Image:N}=R.General;t.storage.accounts||(t.storage.accounts=[]),t.storage.currentAccount||(t.storage.currentAccount=null);const i=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,backgroundColor:e.constants.ThemeColorMap.BACKGROUND_PRIMARY},accountItem:{flexDirection:"row",alignItems:"center",padding:12,backgroundColor:e.constants.ThemeColorMap.BACKGROUND_SECONDARY,borderRadius:8,marginBottom:8},accountAvatar:{width:40,height:40,borderRadius:20,marginRight:12},accountInfo:{flex:1},accountName:{color:e.constants.ThemeColorMap.TEXT_NORMAL,fontSize:16,fontWeight:"bold"},accountEmail:{color:e.constants.ThemeColorMap.TEXT_MUTED,fontSize:14},addButton:{backgroundColor:e.constants.ThemeColorMap.BACKGROUND_TERTIARY,borderRadius:8,padding:12,alignItems:"center",marginTop:8},addButtonText:{color:e.constants.ThemeColorMap.TEXT_LINK,fontWeight:"bold"}});function I(){const c=f.findByProps("getCurrentUser").getCurrentUser(),u=f.findByProps("getEmail").getEmail();return{id:c?.id,username:c?.username,discriminator:c?.discriminator,avatar:c?.avatar,email:u,token:window.DiscordNative?.window?.getAuthToken?.()}}function w(c){let{navigation:u}=c;const[d,s]=e.React.useState(!1),a=function(){s(!0);try{const r=I();if(!r.id||!r.email)throw new Error("Hesap bilgileri al\u0131namad\u0131");if(t.storage.accounts.find(function(l){return l.id===r.id})){o.showToast("Bu hesap zaten kay\u0131tl\u0131",n.getAssetIDByName("Small"));return}t.storage.accounts.push(r),o.showToast("Hesap ba\u015Far\u0131yla kaydedildi",n.getAssetIDByName("Check")),t.storage.accounts.length===1&&(t.storage.currentAccount=r.id),u.goBack()}catch(r){o.showToast("Hesap eklenirken hata: "+r.message,n.getAssetIDByName("Small"))}finally{s(!1)}};return e.React.createElement(v,{style:i.container},e.React.createElement(y,{title:"Mevcut Hesab\u0131 Kaydet"},e.React.createElement(g,{label:"Mevcut hesab\u0131n\u0131z\u0131 kaydedin",subLabel:"Bu hesab\u0131 daha sonra h\u0131zl\u0131ca ge\xE7i\u015F yapmak i\xE7in kaydedin",leading:e.React.createElement(g.Icon,{source:n.getAssetIDByName("ic_add_24px")}),onPress:a,disabled:d})))}function S(c){let{navigation:u}=c;p.useProxy(t.storage);const d=function(a){const r=t.storage.accounts.find(function(l){return l.id===a});if(r)try{window.DiscordNative?.window?.setAuthToken?.(r.token),t.storage.currentAccount=a,o.showToast(`Hesap de\u011Fi\u015Ftirildi: ${r.username}`,n.getAssetIDByName("Check")),u.goBack()}catch(l){o.showToast("Hesap de\u011Fi\u015Ftirilirken hata: "+l.message,n.getAssetIDByName("Small"))}},s=function(a){t.storage.accounts=t.storage.accounts.filter(function(r){return r.id!==a}),t.storage.currentAccount===a&&(t.storage.currentAccount=t.storage.accounts.length>0?t.storage.accounts[0].id:null),o.showToast("Hesap kald\u0131r\u0131ld\u0131",n.getAssetIDByName("Check"))};return e.React.createElement(v,{style:i.container},e.React.createElement(y,{title:"Kay\u0131tl\u0131 Hesaplar"},t.storage.accounts.map(function(a,r){return e.React.createElement(e.React.Fragment,{key:a.id},e.React.createElement(A,{style:i.accountItem,onPress:function(){return d(a.id)},onLongPress:function(){return s(a.id)}},e.React.createElement(N,{style:i.accountAvatar,source:{uri:`https://cdn.discordapp.com/avatars/${a.id}/${a.avatar}.png`},defaultSource:n.getAssetIDByName("Discord")}),e.React.createElement(D,{style:i.accountInfo},e.React.createElement(E,{style:i.accountName},a.username,"#",a.discriminator),e.React.createElement(E,{style:i.accountEmail},a.email)),t.storage.currentAccount===a.id&&e.React.createElement(N,{source:n.getAssetIDByName("ic_radio_checked_24px")})),r<t.storage.accounts.length-1&&e.React.createElement(k,null))})),e.React.createElement(A,{style:i.addButton,onPress:function(){return u.push("VendettaAddAccount")}},e.React.createElement(E,{style:i.addButtonText},"Yeni Hesap Ekle")))}var b=T.definePlugin({name:"Hesap De\u011Fi\u015Ftirici",description:"Discord hesaplar\u0131 aras\u0131nda h\u0131zl\u0131 ge\xE7i\u015F yapman\u0131z\u0131 sa\u011Flar",authors:[{name:"Sen",id:"USER_ID"}],version:"1.0.0",onLoad(){var c=this;const u=[],d=e.NavigationNative.useNavigation();return u.push(B.after("default",f.findByProps("UserSettingsOverviewWrapper"),function(s,a){return e.React.createElement(e.React.Fragment,null,a,e.React.createElement(y,{title:"Hesap Y\xF6netimi"},e.React.createElement(g,{label:"Hesaplar\u0131 Y\xF6net",leading:e.React.createElement(g.Icon,{source:n.getAssetIDByName("ic_profile")}),onPress:function(){return d.push("VendettaAccountManager")}})))})),this.registeredScreens=[e.NavigationNative.registerScreen("VendettaAccountManager",function(){return S}),e.NavigationNative.registerScreen("VendettaAddAccount",function(){return w})],function(){u.forEach(function(s){return s()}),c.registeredScreens.forEach(function(s){return e.NavigationNative.unregisterScreen(s)})}}});return h.default=b,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui.toasts);
