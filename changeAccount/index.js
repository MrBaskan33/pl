(function(h,x,e,p,r,D,F,s,R,d,c){"use strict";const{FormRow:T,FormSection:f,FormDivider:K}=p.Forms,{View:I,Text:g,ScrollView:v,TouchableOpacity:E,Image:k,Modal:M,TextInput:y}=p.General;function C(){return c.SHA256(s.device.uuid).toString(c.enc.Hex).substring(0,32)}function B(a){return c.AES.encrypt(a,C()).toString()}function _(a){return c.AES.decrypt(a,C()).toString(c.enc.Utf8)}r.storage.accounts||(r.storage.accounts=[]),r.storage.currentAccount||(r.storage.currentAccount=null);const o=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,backgroundColor:e.constants.ThemeColorMap.BACKGROUND_PRIMARY},accountItem:{flexDirection:"row",alignItems:"center",padding:12,backgroundColor:e.constants.ThemeColorMap.BACKGROUND_SECONDARY,borderRadius:8,marginBottom:8},modalContainer:{flex:1,backgroundColor:e.constants.ThemeColorMap.BACKGROUND_PRIMARY,padding:16},input:{height:40,borderColor:e.constants.ThemeColorMap.BACKGROUND_TERTIARY,borderWidth:1,marginBottom:12,padding:10,color:e.constants.ThemeColorMap.TEXT_NORMAL,borderRadius:4}});function P(a){let{visible:n,onClose:l}=a;const[t,i]=e.React.useState(""),[S,H]=e.React.useState(""),[A,w]=e.React.useState(!1),Y=async function(){w(!0);try{const N=await R.findByProps("login").login(t,S),u=R.findByProps("getCurrentUser").getCurrentUser(),b=window.DiscordNative?.window?.getAuthToken?.();if(!u||!b)throw new Error("Giri\u015F ba\u015Far\u0131s\u0131z");const G=B(b);r.storage.accounts.push({id:u.id,username:u.username,discriminator:u.discriminator,avatar:u.avatar,email:t,token:G}),d.showToast("Hesap eklendi!",s.getAssetIDByName("Check")),l()}catch(N){d.showToast("Hata: "+N.message,s.getAssetIDByName("Small"))}finally{w(!1)}};return e.React.createElement(M,{visible:n,animationType:"slide"},e.React.createElement(v,{style:o.modalContainer},e.React.createElement(y,{style:o.input,placeholder:"Email",value:t,onChangeText:i,autoCapitalize:"none"}),e.React.createElement(y,{style:o.input,placeholder:"\u015Eifre",secureTextEntry:!0,value:S,onChangeText:H}),e.React.createElement(E,{onPress:Y,disabled:A},e.React.createElement(g,{style:{color:e.constants.ThemeColorMap.TEXT_LINK}},A?"Ekleniyor...":"Hesap Ekle"))))}function O(){D.useProxy(r.storage);const[a,n]=e.React.useState(!1),l=function(t){try{const i=_(t.token);window.DiscordNative?.window?.setAuthToken?.(i),r.storage.currentAccount=t.id,d.showToast(`${t.username} hesab\u0131na ge\xE7ildi`,s.getAssetIDByName("Check"))}catch(i){d.showToast("Token \xE7\xF6z\xFClemedi: "+i.message,s.getAssetIDByName("Small"))}};return e.React.createElement(v,{style:o.container},e.React.createElement(f,{title:"Kay\u0131tl\u0131 Hesaplar"},r.storage.accounts.map(function(t){return e.React.createElement(E,{key:t.id,style:o.accountItem,onPress:function(){return l(t)}},e.React.createElement(k,{source:{uri:`https://cdn.discordapp.com/avatars/${t.id}/${t.avatar}.png`},style:{width:40,height:40,borderRadius:20,marginRight:12}}),e.React.createElement(I,null,e.React.createElement(g,{style:{color:e.constants.ThemeColorMap.TEXT_NORMAL}},t.username,"#",t.discriminator),e.React.createElement(g,{style:{color:e.constants.ThemeColorMap.TEXT_MUTED}},t.email)))})),e.React.createElement(E,{style:{padding:16,alignItems:"center"},onPress:function(){return n(!0)}},e.React.createElement(g,{style:{color:e.constants.ThemeColorMap.TEXT_LINK}},"Yeni Hesap Ekle")),e.React.createElement(P,{visible:a,onClose:function(){return n(!1)}}))}var U=x.definePlugin({name:"G\xFCvenli Hesap De\u011Fi\u015Ftirici",description:"\u015Eifrelenmi\u015F token y\xF6netimi ile hesap ge\xE7i\u015Fi",authors:[{name:"Sen",id:"YOUR_ID"}],version:"2.0.0",onLoad(){var a=this;const n=[],l=e.NavigationNative.useNavigation();return n.push(F.after("default",R.findByProps("UserSettingsOverviewWrapper"),function(t,i){return e.React.createElement(e.React.Fragment,null,i,e.React.createElement(f,{title:"Hesap Y\xF6netimi"},e.React.createElement(T,{label:"Hesaplar\u0131 Y\xF6net",leading:e.React.createElement(T.Icon,{source:s.getAssetIDByName("ic_profile")}),onPress:function(){return l.push("SecureAccountSwitcher")}})))})),this.registeredScreens=[e.NavigationNative.registerScreen("SecureAccountSwitcher",function(){return O})],function(){n.forEach(function(t){return t()}),a.registeredScreens.forEach(function(t){return e.NavigationNative.unregisterScreen(t)})}}});return h.default=U,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta,vendetta.metro.common,vendetta.ui.components,vendetta.plugin,vendetta.storage,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui.toasts,m);
